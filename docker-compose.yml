services:
  chatgpt:
    container_name: aiweb
    image: node:20-alpine
    working_dir: /app
    env_file:
      - .env
    volumes:
      - ./:/app:delegated
      - /app/node_modules
    ports:
      - "80:3000"
    restart: unless-stopped
    # 启动时安装依赖、构建并运行；视项目使用 yarn 或 npm 调整命令
    # yarn config set registry 'https://registry.npmmirror.com/' && (npm pkg delete scripts.prepare || true) && yarn install --network-concurrency 1 &&
    command: sh -c "yarn install && yarn run start"
